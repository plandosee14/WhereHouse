<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="house">
	
	<select id="selectHouseByHno" resultType="com.WhereHouse.house.domain.HouseVO">
		select *
		from house
		where h_no=#{h_no}
	</select>
	<select id="selectHouseReservation" resultType="integer" parameterType="map">
		select count(*)
		from reservation
		where m_id=#{m_id} and h_no=#{h_no} and
		      r_state = 1
	</select>
	<insert id="insertHouse">
	    insert into (house h_no, m_id, m_name, m_phone, h_zip, h_address, h_fare, h_startdate, h_enddate, h_info, h_peoplecnt, 
	           h_type, h_livetype, h_checktime, h_sale, h_salefare, h_rule, h_thumnail)
	    values (house_seq.nextval, #{m_id}, #{m_name}, #{m_phone}, #{h_zip}, #{h_address}, #{h_fare}, #{h_startdate}, #{h_enddate}, #{h_info}, #{h_peoplecnt}, 
	           #{h_type}, #{h_livetype}, #{h_checktime}, #{h_sale}, #{h_salefare}, #{h_rule}, #{h_thumnail})                  
	</insert>
	<update id="rightscore">
		update house_grade set g_rightscore = g_rightscore+#{g_rightscore}, g_cleanscore = g_cleanscore+#{g_cleanscore}, g_checkscore = g_checkscore+#{g_checkscore}, g_commuscore = g_commuscore+#{g_commuscore}
		where h_no=#{h_no} and r_no=#{r_no}
	</update>
</mapper> 
